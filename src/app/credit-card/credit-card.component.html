<!-- Modal -->
<app-modal *ngIf="openModal" (close)="openModal = false"></app-modal>

<!-- Card Form -->
<div class="credit-card-container">
  <div class="card-container mb-4">
    <app-card [cardInfo]="creditCardForm.value"></app-card>
  </div>
  <div class="form-container">
    <form
      [formGroup]="creditCardForm"
      (ngSubmit)="onSubmit()"
      autocomplete="off"
    >
      <div class="mb-3">
        <label for="name" class="form-label">Name of card holder</label>
        <input
          type="text"
          class="form-control input-card"
          id="name"
          maxlength="50"
          (blur)="onCheckControlValidity('holderName')"
          formControlName="holderName"
        />
        <span *ngIf="cardNameHolderError" class="form-error">
          Name is required
        </span>
      </div>

      <div class="card-number-container mb-3">
        <label for="number" class="form-label">Card credit number</label>
        <input
          type="text"
          maxlength="16"
          class="form-control input-card__number"
          id="number"
          (blur)="onCheckControlValidity('cardNumber')"
          formControlName="cardNumber"
        />
        <span *ngIf="cardNumberError" class="form-error">
          Enter a valid card number
        </span>
      </div>

      <div class="row mb-4">
        <div class="col">
          <label for="expiration" class="form-label">Expiration</label>
          <input
            type="text"
            maxlength="5"
            class="form-control input-card"
            id="expiration"
            (blur)="onCheckControlValidity('cardExpiration')"
            formControlName="cardExpiration"
          />
          <span *ngIf="cardExpirationError" class="form-error">
            Enter a valid expiration date
          </span>
        </div>
        <div class="col">
          <label for="cvv" class="form-label d-flex align-items-center">
            CVV
            <div class="cvv-info-container">
              <span class="material-symbols-outlined cvv-info-icon ms-1">
                info
              </span>
              <div class="cvv-info">
                You can find the cvv code on the back of your card
              </div>
            </div>
          </label>
          <input
            type="text"
            maxlength="3"
            class="form-control input-card"
            id="cvv"
            (blur)="onCheckControlValidity('cardCVV')"
            formControlName="cardCVV"
          />
          <span *ngIf="cardCVVError" class="form-error">
            CVV number must be 3 numbers long
          </span>
        </div>
      </div>

      <div class="row">
        <div class="col">
          <button class="btn btn__confirm" type="submit">Make Payment</button>
        </div>

        <div class="col">
          <button class="btn btn__cancel" type="button" (click)="onCancel()">
            Cancel
          </button>
        </div>
      </div>
    </form>
  </div>
</div>
